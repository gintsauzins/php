<!-- @format -->

<!DOCTYPE html>

<form action="api.php?api-name=add-comment" method="post">
  <h3>Comments</h3>
  <label for="">author</label>
  <input type="text" name="comment_author" />
  <textarea name="comment_message"></textarea>
  <button type="submit">add a comment</button>
</form>

<script>
  const forms = document.querySelectorAll("form");

  for (let i = 0; i < forms.length; i++) {
    forms[i].onsubmit = function (event) {
      event.preventDefault();
      const data = new FormData(this);

      if (this.method == "post") {
        fetch(this.action, {
          method: "post",
          body: data,
        }).then((response) => {
          console.log(response);
          // add next commands here
        });
      } else {
        fetch(this.action, {
          method: "get",
          body: data,
        }).then((response) => {
          console.log(response);
          // add next commands here
        });
      }
    };
  }
</script>
